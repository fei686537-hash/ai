简化了部分无法实现的功能:

跳过了违规信息检查(API不支持)
跳过了问询次数检查(API不支持)


我对换手率筛选部分做了以下改进：

换手率计算方式改进：

获取5日的成交量数据来计算平均成交量
获取流通股本数据
换手率 = 平均成交量 / 流通股本 * 100%
数据处理优化：

移除成交量数据中的NaN值
确保流通股本为正数
添加了数据有效性检查
日志输出增强：

显示每只股票的5日平均换手率
显示成功计算换手率的股票数量
显示换手率中位数
列出被剔除的高换手率股票及其具体换手率
这样的改进有以下优点：

使用5日平均成交量可以平滑单日异常值
直接使用成交量和流通股本计算更准确
增加了更多日志输出，方便调试和监控
更严格的数据有效性检查，提高结果可靠性

跳过了未来流通股检查(无法获取未来数据)
添加了基本的交易逻辑:

等权重分配资金到选中的股票
对不在新股票池中的持仓进行清仓
对新股票池中的股票进行调仓

使用方法:


将代码上传到ptrade平台
设置运行周期为每日
策略会自动执行以下操作:
每日更新股票池
根据13个条件筛选股票
等权重调仓到筛选出的股票
需要注意:

股票池更新频率可以通过修改 context.refresh_rate 调整
可以根据需要修改筛选条件的参数
可以根据需要修改调仓逻辑
